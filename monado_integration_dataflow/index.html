<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Monado integration dataflow - ILLIXR Docs</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Monado integration dataflow";
    var mkdocs_page_input_path = "monado_integration_dataflow.md";
    var mkdocs_page_url = "/monado_integration_dataflow/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> ILLIXR Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../building_illixr/">Building illixr</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../debugging_illixr/">Debugging illixr</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../getting_started/">Getting started</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../illixr_plugins/">Illixr plugins</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../modifying_a_plugin/">Modifying a plugin</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../monado_illixr_runtime_overview/">Monado illixr runtime overview</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Monado integration dataflow</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#monado-integration-dataflow">Monado Integration Dataflow</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../visualizer_logger/">Visualizer logger</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../writing_your_plugin/">Writing your plugin</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">ILLIXR Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Monado integration dataflow</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="monado-integration-dataflow">Monado Integration Dataflow</h2>
<p>The integration for monado in terms of dataflow can be divided into two parts, getting pose from
illixr, and sending user rendered frame to illixr.</p>
<p>In monado, illixr looks like an HMD for monado, while in illixr, monado looks like a user
application as <code>gldemo</code>. After illixr is initialized from monado, and monado is registered as a
plugin for illixr, most recent pose information is easy to get from switchboard.</p>
<p>The compositor side of monado integration with illixr is done in more subtle way. Original monado
compositor mostly does distortion correction and aberration correction in a vulkan back-end
compositor. It also has two client compositor, one for opengl app, the other for vulkan app, which
pass frame data to the back-end compositor. Illixr integration intercepts the frame at gl client
compositor and sends it to switchboard of illixr, which is then used by <code>timewarp_gl</code> component.</p>
<p>In order to get a opengl frame and use it without copying pixels, illixr needs to get the user
application gl context. It is done at OpenXR session creation time, where illixr is
initialized. Note that logically illixr is initialized during OpenXR instance creation, or running
at the background all the time. But, since illixr only supports single session at this time, and
requires a user application gl context upon initialization, illixr is initialized at session
creation time.</p>
<p>Current illixr integration for monado is a temporary solution and has some downsides because of the
progress from both monado and illixr.</p>
<ol>
<li>
<p>It does not use the pose that user application declares to use at rendering (OpenXR
   specification) because of monado internal interfaces. The pose difference used by timewarp comes
   from the last pose query call.</p>
</li>
<li>
<p>It cannot submit frame with depth buffer.</p>
</li>
<li>
<p>The pose from illixr does not vary according to the OpenXR space. It is a raw pose data from slam
   algorithms.</p>
</li>
<li>
<p>No controller action support at all.</p>
</li>
<li>
<p>It only supports gl user applications.</p>
</li>
<li>
<p>User application cannot acquire more than one swapchain image (for each eye) in one frame.</p>
</li>
<li>
<p>Illixr is initialized during session creation time.</p>
</li>
</ol>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../visualizer_logger/" class="btn btn-neutral float-right" title="Visualizer logger">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../monado_illixr_runtime_overview/" class="btn btn-neutral" title="Monado illixr runtime overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../monado_illixr_runtime_overview/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../visualizer_logger/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
